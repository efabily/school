<?php


/**
 * Skeleton subclass for performing query and update operations on the 'sch_discount_contract' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * Thu Nov 22 00:54:53 2012
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model.student
 */
class DiscountContractPeer extends BaseDiscountContractPeer {

   public static function getDiscountByContract($contract_id, $id_state = null)
   {
      $criteria = new Criteria();
      
      $criteria->add(self::CONTRACT_ID, $contract_id);
      if($id_state)
      {
	 $criteria->add(self::ID_STATE, $id_state);
      }
      
      return self::doSelectOne($criteria);
   }
   
   
   public static function getDiscountContractBySales($sales_id)
   {
      $criteria = new Criteria();
      
      $criteria->addJoin(self::CONTRACT_ID, ContractPeer::ID);
      $criteria->addJoin(ContractPeer::ID, AccountPeer::CONTRACT_ID);
      $criteria->addJoin(AccountPeer::ID, SaleAccountPeer::ACCOUNT_ID);
      $criteria->add(SaleAccountPeer::SALES_ID, $sales_id);
      $criteria->add(self::ID_STATE, 2);// Activo
      
      return self::doSelectOne($criteria);
   }
   
} // DiscountContractPeer
