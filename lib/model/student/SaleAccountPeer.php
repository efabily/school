<?php


/**
 * Skeleton subclass for performing query and update operations on the 'sch_sale_account' table.
 *
 *
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * Fri Sep 28 00:21:35 2012
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model.student
 */
class SaleAccountPeer extends BaseSaleAccountPeer {

   /**
    *
    * @param Int $sales_id
    * @param Int $account_id
    * @param Int $id_state
    * @return SaleAccount
    */
   public static function getSaleAccountBySaleAndAccount($sales_id = null, $account_id = null, $id_state = null)
   {
      $criteria = new Criteria();

      if($sales_id)
      {
	 $criteria->add(self::SALES_ID, $sales_id);
      }

      if($account_id)
      {
	 $criteria->add(self::ACCOUNT_ID, $account_id);
      }

      if($id_state)
      {
	$criteria->add(self::ID_STATE, $id_state);
      }

      return self::doSelectOne($criteria);
   }


   public static function getBySales($sales_id, $id_state = null, $id_state_mayor = null, $id_state_menor = null)
   {
      $criteria = new Criteria();

      $criteria->add(self::SALES_ID, $sales_id);

      if($id_state)
      {
	 $criteria->add(self::ID_STATE, $id_state);
      }

      if($id_state_mayor)
      {
	 $criteria->addAnd(self::ID_STATE, $id_state_mayor, Criteria::GREATER_THAN);
      }

      if($id_state_menor)
      {
	 $criteria->addAnd(self::ID_STATE, $id_state_menor, Criteria::LESS_THAN);
      }

      return self::doSelectOne($criteria);
   }


   // DESDE EL 01-01-2014
   public static function getTotalPagoByAccount($account_id)
   {
   	 	$criteria = new Criteria();

   	 	$criteria->add(self::ACCOUNT_ID, $account_id);
   	 	$criteria->add(self::ID_STATE, 3);
   	 	$criteria->addGroupByColumn(self::ID);

   	 	return self::doSelect($criteria);
   }



} // SaleAccountPeer
