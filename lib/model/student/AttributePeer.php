<?php


/**
 * Skeleton subclass for performing query and update operations on the 'sch_attributes' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * Tue Sep  4 00:14:38 2012
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model.student
 */
class AttributePeer extends BaseAttributePeer {

   /**
    *
    * @param Int $id_state
    * @param String $key
    * @param String $value
    * @param String $label
    * @param String $description
    * @param Int $person_id
    * @param Attribute $attribute || null
    * @param PropelPDO $con
    * @return Attribute 
    */
   public static function saveAttribute($id_state, $key, $value, $label, $description, $person_id, $attribute = null, $con = null)
   {
      if(!is_object($attribute))
      {
	 $attribute = new Attribute();
      }
      
      $attribute->setIdState($id_state);
      $attribute->setKey($key);
      $attribute->setValue($value);
      $attribute->setLabel($label);
      $attribute->setDescription($description);
      $attribute->setPersonId($person_id);
      $attribute->save($con);
      
      return $attribute;
   }
   
   /**
    *     
    * @param String $key
    * @param Int $person_id
    * @param Int $id_state || null
    * @return Attribute
    */
   public static function getAttributeByKeyAndPerson($key, $person_id, $id_state = null)
   {
       $criteria = new Criteria();
       $criteria->add(self::KEY, $key);
       $criteria->add(self::PERSON_ID, $person_id);
       
       if($id_state)
       {
           $criteria->add(self::ID_STATE, $id_state);
       }
       
       return self::doSelectOne($criteria);
   }
   
} // AttributePeer
