<?php


/**
 * Skeleton subclass for representing a row from the 'sch_movement_cashbox_deposit' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * Fri Sep 28 00:21:35 2012
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model.student
 */
class MovementCashboxDeposit extends BaseMovementCashboxDeposit {

   /**
   * Devuelve los movimientos, del deposito
   * 
   * @param Int $deposit_id
   * @param Int $form_of_payment
   * @param Int $cashbox_id
   * @return MovementCashboxDeposits 
   */
  public static function getFromDeposit($deposit_id, $form_of_payment = null, $cashbox_id = null)
  {
    $criteria = new Criteria();
    $criteria->add(self::DEPOSIT_ID, $deposit_id);
    
    $criteria->addJoin(self::MOVEMENT_CASHBOX_ID, MovementCashboxPeer::ID);
    $criteria->addJoin(MovementCashboxPeer::PAYMENT_TYPE_ID, PaymentTypePeer::ID);

    if($form_of_payment)
    {      
      $criteria->add(PaymentTypePeer::FORM_OF_PAYMENT_ID, $form_of_payment);
    } else {
      $criteria->addDescendingOrderByColumn(PaymentTypePeer::FORM_OF_PAYMENT_ID);
    }

    if($cashbox_id)
    {
      $criteria->add(MovementCashboxPeer::CASHBOX_ID, $cashbox_id);
    }

    return self::doSelect($criteria);
    
  }
  
} // MovementCashboxDeposit
